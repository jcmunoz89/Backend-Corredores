/* =========================
   Variables y temas
   ========================= */
   :root {
    --bg: #0b1220;
    --panel: #0f172a;
    --text: #e2e8f0;
    --muted: #94a3b8;
    --primary: #3b82f6;
    --primary-600: #2563eb;
    --warn: #ef4444;
    --ok: #10b981;
    --shadow: 0 10px 25px rgba(0, 0, 0, .25);
    --r: 16px;
  }
  
  [data-theme="light"] {
    --bg: #F2F6FD;
    --panel: #fff;
    --text: #0f172a;
    --muted: #475569;
    --primary: #2563eb;
    --primary-600: #1d4ed8;
    --warn: #dc2626;
    --ok: #059669;
    --shadow: 0 8px 20px rgba(2, 6, 23, .08);
  }
  
  /* Header tambiÃ©n difuminado en modo claro */
  [data-theme="light"] header.app {
    background: linear-gradient(180deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, 0));
    backdrop-filter: saturate(140%) blur(8px);
  }
  
  /* =========================
     Reset / Base
     ========================= */
  * { box-sizing: border-box; }
  
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
.login-body {
  min-height: 100vh;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-image: url('Imagenes/Fondologin.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  color: #0f172a;
}
.login-root {
  --bg: #F2F6FD;
  --panel: #fff;
  --text: #0f172a;
  --muted: #475569;
  --primary: #2563eb;
  --primary-600: #1d4ed8;
  --warn: #dc2626;
  --ok: #059669;
  --shadow: 0 8px 20px rgba(2, 6, 23, .08);
}
.login-root.login-animate {
  animation: loginSlideUp 0.25s ease-out;
}
.login-card {
  will-change: transform, opacity;
}
@keyframes loginSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.login-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 1.5rem;
}
.login-card {
  background-color: #ffffff;
  border-radius: 15px;
  box-shadow: 0 20px 40px rgba(15, 23, 42, 0.12);
  padding: 80px 64px;
  max-width: 480px;
  width: 100%;
  text-align: center;
}
.login-logo {
  max-width: 150px;
  height: auto;
  margin-bottom: 24px;
}
.login-subtitle {
  margin-bottom: 24px;
  font-size: .95rem;
  color: #4b5563;
}
.login-card .form-group {
  text-align: left;
  margin-bottom: 16px;
}
.login-remember-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  margin-bottom: 35px;
  color: #7e7e7e;
  justify-content: flex-start;
  width: 100%;
  text-align: left;
  font-weight: 600;
}
.login-remember-row input[type="checkbox"] {
  width: 18px;
  height: 18px;
}
.login-forgot {
  display: block;
  margin-top: 32px;
  margin-bottom: 24px;
  font-size: .9rem;
  text-decoration: underline;
  color: #111827;
  text-align: center;
}
.login-actions {
  display: flex;
  gap: .5rem;
  justify-content: center;
}
.login-footer {
  margin-top: 15px;
  font-size: .8rem;
  color: #9ca3af;
}
.login-footer a {
  color: inherit;
  text-decoration: none;
}
.login-footer a:hover {
  text-decoration: underline;
}

body.app-loading #login,
body.app-loading #app {
  display: none;
}

.hidden { display: none !important; }

#globalProgress {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 5px;
  background: #0097cc;
  box-shadow: 0 4px 12px rgba(0, 0, 0, .3);
  z-index: 999;
  opacity: .95;
  transform: translateY(-5px);
  transition: transform .2s ease;
}
#globalProgress.is-visible {
  transform: translateY(0);
}

  /* =========================
     Botones y chips
     ========================= */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    border: none;
    border-radius: 12px;
    padding: .6rem 1rem;
    background: var(--primary);
    color: #fff;
    cursor: pointer;
    font-weight: 700;
    box-shadow: var(--shadow);
  }
  .btn:hover { background: var(--primary-600); }
  .btn.secondary {
    background: transparent;
    color: var(--text);
    border: 1px solid rgba(148, 163, 184, .25);
  }
  .btn.warn { background: var(--warn); }
  .btn:disabled {
    background: #475569;
    color: rgba(255, 255, 255, .7);
    cursor: not-allowed;
    box-shadow: none;
    opacity: .85;
  }
  [data-theme="light"] .btn:disabled {
    background: rgba(148, 163, 184, .6);
    color: #1e293b;
  }
  
  .chip {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    padding: .25rem .6rem;
    border: 1px solid rgba(148, 163, 184, .25);
    border-radius: 999px;
    color: var(--muted);
    font-size: .8rem;
  }
  
  /* =========================
     Formularios
     ========================= */
  input,
  select,
  textarea {
    width: 100%;
    padding: .6rem .8rem;
    border-radius: 12px;
    border: 1px solid rgba(148, 163, 184, .25);
    background: transparent;
    color: var(--text);
  }
  #q {
    background: #fff;
  }
  .input-muted-placeholder::placeholder {
    color: rgba(148, 163, 184, .8);
  }
  .export-range-warning {
    background-color: #e53935;
    color: #ffffff;
    padding: 8px 12px;
    border-radius: 6px;
    margin-bottom: 12px;
    font-size: 0.9rem;
  }

  .company-search {
    position: relative;
  }

  .company-search-select {
    display: none;
  }

  .company-search-list {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
    padding: 6px;
    border-radius: 12px;
    border: 1px solid rgba(148, 163, 184, .25);
    background: var(--panel);
    box-shadow: var(--shadow);
    z-index: 40;
  }

  .company-search-option {
    text-align: left;
    border: none;
    background: transparent;
    color: var(--text);
    padding: .45rem .6rem;
    border-radius: 8px;
    cursor: pointer;
  }

  .company-search-option:hover,
  .company-search-option:focus {
    background: rgba(59, 130, 246, .12);
    outline: none;
  }
  
  /* =========================
     Header
     ========================= */
  header.app {
    position: sticky;
    top: 0;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: 1rem 1.25rem;
    background: linear-gradient(180deg, rgba(2, 6, 23, .8), rgba(2, 6, 23, 0));
    backdrop-filter: saturate(140%) blur(8px);
  }
  
  .brand {
    display: flex;
    align-items: center;
    gap: .75rem;
  }
  .header-left {
    gap: .75rem;
  }
  .logo {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: conic-gradient(from 180deg at 50% 50%, #60a5fa, #22c55e, #60a5fa);
    box-shadow: var(--shadow);
  }
  .logo-konecta-cuadrado {
    width: 51.984px;
    height: 51.984px;
    object-fit: contain;
    border-radius: 12px;
    background: rgba(148, 163, 184, .12);
    padding: 6px;
  }
  .logo-corredora {
    width: 235px;
    height: 108px;
    object-fit: contain;
    border-radius: 12px;
    background: transparent;
    padding: 6px;
    margin-right: 16px;
    transform: translateX(8px);
    box-shadow: none;
  }
  .header-divider {
    width: 1px;
    height: 64px;
    background: rgba(148, 163, 184, .45);
    margin: 0 12px;
  }
  .header-user-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 2px;
  }
  .header-user-role {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .01em;
  }
  .header-user-name {
    font-weight: 400;
  }
  [data-theme="light"] .header-user-name {
    color: #334155;
  }

  /* =========================
     Layout
     ========================= */
#app {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding-top: var(--app-header-offset, 0px);
}
#app > header.app {
  flex-shrink: 0;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
}
.layout {
  flex: 1;
  display: grid;
  grid-template-columns: 270px 1fr;
  gap: 1rem;
  padding: .25rem 1.25rem .75rem;
}
  .layout.no-filters {
    grid-template-columns: 1fr;
  }
  .app-header-actions {
    display:flex;
    gap:.5rem;
    align-items:center;
    flex-wrap:wrap;
  }
  .editor-header-actions {
    display:none;
    gap:.5rem;
    align-items:center;
    flex-wrap:wrap;
  }
  body.editing .app-header-actions {
    display:none;
  }
  body.editing .editor-header-actions {
    display:flex;
  }

  @media (max-width: 1100px) {
    .layout { grid-template-columns: 1fr; }
    .panel-left { order: 2; }
  }
  @media (max-width: 800px) {
    .layout { grid-template-columns: 1fr; }
    .panel-left { order: 2; }
  }
  body.show-form {
    overflow: hidden;
  }
  .form-modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    background: rgba(2, 6, 23, .75);
    backdrop-filter: blur(4px);
    z-index: 50;
  }
  body.show-form .form-modal {
    display: flex;
  }
  .form-modal .panel-right {
    width: min(480px, 100%);
    max-height: 90vh;
    overflow: auto;
    box-shadow: 0 20px 45px rgba(0, 0, 0, .45);
  }

  body.editing .panel-right {
    display: none !important;
  }

.editor-action {
  display: none;
}
body.editing .editor-action {
  display: inline-flex !important;
}
body.editing .bulk-action {
  display: none !important;
}
body.editing #countLabel {
  display: none;
}

  .picker-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    background: rgba(2, 6, 23, .55);
    z-index: 60;
  }
  .picker-card {
    background: var(--panel);
    border-radius: var(--r);
    padding: 1rem;
    min-width: min(320px, 100%);
    box-shadow: 0 15px 40px rgba(0, 0, 0, .4);
    display: flex;
    flex-direction: column;
    gap: .75rem;
  }
  .picker-search {
    display: none;
  }
  .picker-search input {
    width: 100%;
    padding: .5rem .75rem;
    border-radius: 10px;
    border: 1px solid rgba(148, 163, 184, .4);
    background: #fff;
    color: #0f172a;
  }
  .picker-title {
    font-weight: 700;
    font-size: 1.5rem;
  }
  .picker-options {
    display: flex;
    flex-direction: column;
    gap: .5rem;
  }
  .picker-option {
    border: 1px solid rgba(148, 163, 184, .35);
    border-radius: 10px;
    padding: .6rem .8rem;
    background: #fff;
    color: #0f172a;
    text-align: left;
    cursor: pointer;
    font-weight: 600;
  }
.picker-option:hover {
  border-color: var(--primary);
  color: var(--primary);
}
.picker-option.is-selected {
    border-color: var(--primary);
    background: rgba(0, 151, 204, .08);
    color: var(--primary);
  }
  .picker-footer {
    display: flex;
    justify-content: flex-end;
    gap: .5rem;
  }
  .input-error {
    border-color: var(--warn) !important;
    box-shadow: 0 0 0 1px rgba(239,68,68,.4);
  }
  .modal-blur {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    background: rgba(2, 6, 23, .75);
    backdrop-filter: blur(4px);
    z-index: 70;
  }
  .modal-blur:not(.hidden) {
    display: flex;
  }
  .modal-blur__card {
    width: min(360px, 100%);
    background: var(--panel);
    border-radius: 16px;
    padding: 1.25rem;
    box-shadow: var(--shadow);
  }
  .modal-blur__card h3 {
    margin: 0 0 .5rem;
  }
  .modal-blur__actions {
    display: flex;
    justify-content: flex-end;
    margin-top: 1rem;
  }
  #metaModal .modal-blur__card {
    width: min(960px, 100%);
    max-height: 90vh;
    display: flex;
    flex-direction: column;
  }
  .toast-success {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;
    background: rgba(0, 0, 0, 0.75);
    border-radius: 12px;
    padding: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
  }
  .toast-check-wrapper {
    width: 52px;
    height: 52px;
  }
  .toast-check-icon {
    width: 52px;
    height: 52px;
  }
  .toast-check-circle {
    stroke: #4caf50;
    stroke-width: 3;
    stroke-linecap: round;
  }
  .toast-check-check {
    stroke: #4caf50;
    stroke-width: 3;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: 48;
    stroke-dashoffset: 48;
    animation: toast-check-draw .4s ease-out forwards;
  }
  @keyframes toast-check-draw {
    from { stroke-dashoffset: 48; }
    to { stroke-dashoffset: 0; }
  }
  
  /* =========================
     Paneles / Tarjetas
     ========================= */
.panel,
.card {
  background: var(--panel);
  border-radius: var(--r);
  padding: 1rem;
  box-shadow: var(--shadow);
}
main.panel {
  display: flex;
  flex-direction: column;
  min-height: 0;
}
#tableCard {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}
#tableView {
  flex-shrink: 0;
}
#caseEditor {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
}
  #caseEditor .card {
    background: var(--panel);
    border: 1px solid transparent;
    transition: background-color .2s ease, border-color .2s ease, box-shadow .2s ease;
  }
  [data-theme="light"] #caseEditor .card {
    background: #fff;
    border: 1px solid #ECF2FF;
  }
  #caseEditor .card:hover {
    border-color: rgba(79, 70, 229, .55);
    box-shadow: var(--shadow), 0 0 0 1px rgba(79, 70, 229, .12);
  }
.section-title {
  font-weight: 700;
  margin-bottom: .5rem;
}
.section-title-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: .5rem;
  margin-bottom: .5rem;
}
  .use-client-toggle {
    display: inline-flex;
    align-items: center;
    gap: .35rem;
    font-size: .85rem;
    color: #374151;
    font-weight: 600;
    white-space: nowrap;
  }
.header-right {
  display: flex;
  align-items: center;
  gap: .75rem;
}
.lus-client-chip {
  display: none;
  gap: .75rem;
  color: #0F172A;
  font-size: .9rem;
  font-weight: 700;
  text-align:center;
}
.lus-client-status .lus-client-chip__label {
  color:#0F172A;
  font-weight:700;
  margin-right:4px;
}
.lus-client-status .value {
  display:inline-flex;
  align-items:center;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.4);
  font-size:.75rem;
  text-transform:capitalize;
}
.lus-client-info {
  display:flex;
  align-items:center;
  gap:5px;
}
.lus-client-chip__label {
  font-weight: 700;
}
.lus-client-chip span.value {
  color: #0F172A;
  font-size: .85rem;
}
.lus-client-tags {
  display:none;
  align-items:center;
  gap:4px;
}
.lus-client-tags .value {
  background: rgba(15,23,42,.1);
  padding:2px 6px;
  border-radius:999px;
  font-size:.8rem;
}
body.editing #dashboardToggleWrap {
  display: none;
}
body.editing .lus-client-chip {
  display: flex;
}
  .case-cards-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 5px;
    margin-bottom: .75rem;
  }
.filters-card-header {
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  gap:.5rem;
  margin-bottom:.5rem;
}
.filters-card-title {
  font-weight:600;
  font-size:1.1rem;
  display:none;
}
.filters-mode-toggle {
  display:inline-flex;
  border-radius:999px;
  background:rgba(148,163,184,.2);
  padding:2px;
  gap:2px;
}
[data-theme="light"] .filters-quick-actions {
  background: transparent;
}
.filters-quick-actions {
  display:flex;
  align-items:center;
  gap:.5rem;
  margin-top: 42px;
  flex-wrap:wrap;
}
.filters-divider {
  width: 100%;
  height: 1px;
  background: rgba(148, 163, 184, .45);
  margin: 18px 0;
  transform: translateY(10px);
}
[data-theme="light"] .filters-mode-toggle {
  background:#f0f2f5;
}
.filters-mode-btn {
  border:none;
  background:transparent;
  padding:4px 10px;
  border-radius:999px;
  font-size:.8rem;
  cursor:pointer;
  color:var(--text);
}
.filters-mode-btn.active {
  background:#0844a4;
  color:#fff;
}
.filters-section {
  margin-top:.5rem;
}
.filters-section.hidden {
  display:none !important;
}
.filter-groups-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:.5rem;
}
.filter-group-pill {
  border-radius:10px;
  padding:.65rem .75rem;
  border:1px solid rgba(148,163,184,.35);
  background:rgba(15,23,42,.4);
  text-align:left;
  cursor:pointer;
  color:var(--text);
  transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
  display:flex;
  flex-direction:column;
  gap:.25rem;
}
[data-theme="light"] .filter-group-pill {
  background:#fff;
}
.filter-group-pill:hover {
  border-color:#0844a4;
  box-shadow:0 0 0 1px rgba(8,68,164,.15);
}
.filter-group-pill.active {
  background:#0844a4;
  color:#fff;
  border-color:#0844a4;
}
.filter-group-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.35rem;
}
.filter-group-pill .filter-group-title {
  font-weight:600;
  font-size:.85rem;
}
.filter-group-pill .filter-group-subtitle {
  font-size:.75rem;
  opacity:.8;
}
.filter-group-count {
  font-weight:700;
  font-size:1.105rem;
  color:var(--primary);
}
.filter-group-pill.active .filter-group-count {
  color:#fff;
}
.dashboard-view {
  margin-bottom: .75rem;
}
.dashboard-view .dash-grid {
  margin-bottom: .5rem;
}

.kensa-footer {
  margin: 8px auto 0;
    padding: 0 1.25rem 1.25rem;
    text-align: center;
    color: #f5f5f5;
  }
.kensa-footer__line {
  position: relative;
  margin-bottom: 5px;
  font-weight: 700;
  font-size: .8rem;
  letter-spacing: .02em;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  padding-bottom: 3px;
  }
  .kensa-footer__line::before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: calc(50% - 3px);
    height: 1px;
    background: #f5f5f5;
    z-index: 0;
  }
.kensa-footer__line span {
    padding: 0 .75rem;
    position: relative;
    z-index: 1;
    color: #c0c0c0;
    background: var(--bg);
  }
  .kensa-footer a {
    color: #c0c0c0;
    text-decoration: underline;
    font-weight: 400;
    font-size: .85rem;
  }
  [data-theme="light"] .kensa-footer {
    color: #fff;
  }
  [data-theme="light"] .kensa-footer__line::before {
    background: #0097cc;
  }
  [data-theme="light"] .kensa-footer__line span {
    color: #003058;
    background: var(--bg);
  }
  [data-theme="light"] .kensa-footer a {
    color: #003058;
    font-weight: 400;
  }
  .info-toast {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(.95);
    background: #fff;
    border: 1px solid #c0c0c0;
    width: min(360px, 85vw);
    aspect-ratio: 89 / 55;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    border-radius: 16px;
    color: #0097cc;
    font-weight: 700;
    font-size: 1rem;
    box-shadow: 0 20px 45px rgba(0, 0, 0, .2);
    opacity: 0;
    transition: opacity .2s ease, transform .2s ease;
    z-index: 1000;
  }
  .info-toast.is-visible {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  
  /* =========================
     Tablas
     ========================= */
  table {
    width: 100%;
    border-collapse: collapse;
  }
  th,
  td {
    padding: .7rem;
    border-bottom: 1px dashed rgba(148, 163, 184, .2);
  }
th {
  font-size: .8rem;
  text-transform: uppercase;
  letter-spacing: .06em;
  color: var(--muted);
  text-align: left;
}
  
  /* Encabezado fijo (sticky) para la tabla de tareas */
  #tableCard thead th {
    position: sticky;
    top: 0;
    z-index: 0;            /* por encima de las filas */
    background: var(--panel);
  }
  
  /* Contenedor con scroll para la tabla de tareas */
  .table-scroll {
    overflow: auto;
    flex: 1;
    min-height: 0;
  }
  
  /* =========================
     Dashboard
     ========================= */
/* Fix Dashboard: establish stable grid/height to avoid â€œderretidoâ€ effect */
#dashboardSummary {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.dashboard-actions-row {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin-top: 0;
}
.dashboard-actions-bar {
  display: flex;
  align-items: center;
  gap: .5rem;
}
.dashboard-actions {
  display: flex;
  gap: .5rem;
  align-items: center;
  margin: 0;
}
.dashboard-goal-panel {
  padding: 1rem;
  border-radius: 12px;
  border: 1px solid rgba(148, 163, 184, .25);
  background: var(--panel);
  box-shadow: var(--shadow);
}
.funnel-container {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px 0 16px;
}
.funnel-layer {
  margin: 0 auto;
  border-radius: 6px;
  color: #fff;
  font-weight: 600;
  position: relative;
  width: 100%;
  min-height: 42px;
  display: flex;
  align-items: center;
  clip-path: polygon(0 0, 100% 0, 90% 100%, 10% 100%);
  transform-origin: center;
}
.funnel-layer-0 { background: linear-gradient(90deg, #0052CC, #4C8DFF); transform: scaleX(1); }
.funnel-layer-1 { background: linear-gradient(90deg, #2F6DFF, #6FA0FF); transform: scaleX(.9); }
.funnel-layer-2 { background: linear-gradient(90deg, #4F84FF, #8EB6FF); transform: scaleX(.8); }
.funnel-layer-3 { background: linear-gradient(90deg, #2F6DFF, #6FA0FF); transform: scaleX(.7); }
.funnel-layer-4 { background: linear-gradient(90deg, #0052CC, #4C8DFF); transform: scaleX(.6); }
.funnel-layer-content {
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 18px;
  width: 100%;
}
.funnel-layer-content span {
  font-family: inherit;
  font-weight: 700;
}
.funnel-label {
  flex: 1;
  text-align: left;
  padding-left: 12px;
}
.funnel-value {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  font-weight: 700;
  min-width: 50px;
  text-align: center;
}
.funnel-percent {
  min-width: 70px;
  text-align: right;
  opacity: .9;
  margin-left: auto;
  margin-right: 14px;
}
.funnel-tooltip {
  position: absolute;
  z-index: 10;
  background: var(--panel);
  color: var(--text, #0f172a);
  border: 1px solid rgba(148, 163, 184, .35);
  box-shadow: 0 16px 40px rgba(15, 23, 42, .18);
  padding: .55rem .75rem;
  border-radius: 12px;
  font-weight: 600;
  font-size: .9rem;
  white-space: nowrap;
  pointer-events: none;
  transform: translate(-50%, -110%);
  transition: opacity 120ms ease, transform 140ms ease, visibility 0s linear;
}
.funnel-tooltip::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: -8px;
  transform: translateX(-50%) rotate(45deg);
  width: 14px;
  height: 14px;
  background: inherit;
  border: 1px solid rgba(148, 163, 184, .35);
  border-top: none;
  border-left: none;
  box-shadow: 4px 4px 12px rgba(15, 23, 42, .15);
}
.funnel-tooltip.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(-50%, -120%) scale(.97);
}
.chart-tooltip {
  position: absolute;
  z-index: 20;
  background: var(--panel);
  color: var(--text, #0f172a);
  border: 1px solid rgba(148, 163, 184, .35);
  box-shadow: 0 16px 40px rgba(15, 23, 42, .18);
  padding: .65rem .85rem;
  border-radius: 12px;
  font-weight: 600;
  font-size: .9rem;
  min-width: 180px;
  pointer-events: none;
  transform: translate(-50%, -120%);
  transition: opacity 120ms ease, transform 140ms ease, visibility 0s linear;
  backdrop-filter: blur(6px);
}
.chart-tooltip.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(-50%, -135%) scale(.97);
}
.chart-tooltip-title {
  font-size: .8rem;
  text-transform: uppercase;
  letter-spacing: .02em;
  color: var(--muted);
  margin-bottom: .3rem;
}
.chart-tooltip-row {
  display: flex;
  align-items: center;
  gap: .45rem;
  margin-top: .15rem;
  white-space: nowrap;
}
.chart-tooltip-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  display: inline-block;
  box-shadow: 0 0 0 1px rgba(15, 23, 42, .25);
}
.chart-tooltip-label {
  flex: 1;
}
.is-hidden {
  display: none !important;
}
.dash-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1rem;
}
#dashboardChartsRow,
#dashboardSummary .charts-grid {
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  grid-auto-rows: 340px;
  align-items: stretch;
}
.dash-card {
  padding: 1rem;
  border-radius: 12px;
  border: 1px solid rgba(148, 163, 184, .25);
  background: var(--panel);
  box-shadow: var(--shadow);
  cursor: default;
  display: flex;
  flex-direction: column;
  gap: .35rem;
}
.dash-card[data-ins] {
  cursor: pointer;
}
.dash-card.chart-card {
  position: relative;
  min-height: 340px;
  height: 340px;
  max-height: 340px;
  overflow: hidden;
  contain: layout paint;
}
.dash-card.chart-card canvas {
  flex: 1;
  width: 100% !important;
  height: 100% !important;
  min-height: 0;
}
.dash-card.chart-card .funnel-container {
  height: 100%;
  justify-content: center;
}
.dash-card.chart-card:hover {
  transform: none;
}
#dashboardFilters.dashboard-filters,
#dashboardFilters,
.dashboard-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 8px 16px;
  padding: 1rem;
  border-radius: 12px;
  border: 1px solid rgba(148, 163, 184, .25);
  background: var(--panel);
  box-shadow: var(--shadow);
}
#dashboardFilters.dashboard-filters label {
  flex: 1 1 220px;
  display: flex;
  flex-direction: column;
}
#dashboardFilters select,
#dashboardFilters input[type="date"] {
  width: 100%;
}
.dashboard-range-wrapper {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: flex-end;
}
.dashboard-range-wrapper > label {
  flex: 1 1 220px;
  display: flex;
  flex-direction: column;
}
.dashboard-custom-range {
  display: none;
  flex: 1 1 220px;
  gap: 12px;
  align-items: flex-end;
}
.dashboard-custom-range.visible {
  display: flex;
}
.dashboard-custom-range > label {
  display: flex;
  flex-direction: column;
  font-size: .9rem;
}
.dashboard-custom-range input[type="date"] {
  width: 130px;
}
#funnelContainer {
  flex: 1;
  overflow: visible;
  margin-top: 0;
  padding: 8px 0;
}
#dashboardKpiCards .dash-card {
  min-height: 150px;
}
.dash-card .stat-value {
  font-size: 3rem;
  text-align: center;
  color: #0097CC;
  font-weight: 700;
}
.dash-card .stat-value + .muted {
  font-size: 1rem;
  text-align: center;
}
.dash-card .dash-section-title {
  font-weight: 600;
}
.dash-section-header {
  display: flex;
  align-items: center;
  gap: .5rem;
}
.kpi-granularity-controls {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin-left: auto;
  flex-wrap: wrap;
}
.kpi-granularity-label {
  font-size: .85rem;
  color: #6b7280;
}
.kpi-granularity-toggle {
  display: flex;
  gap: .25rem;
}
.granularity-btn {
  border: 1px solid #d1d5db;
  background: #fff;
  color: #111827;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: .8rem;
  cursor: pointer;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
.granularity-btn.granularity-active {
  background: #111827;
  color: #fff;
  border-color: #111827;
}
.dashboard-table-card {
  gap: .5rem;
}
.dashboard-table-card .table-scroll {
  max-height: 420px;
  flex: 1;
}
.dash-card:hover { transform: translateY(-1px); }
.dash-count { font-size: 1.6rem; font-weight: 800; }
  
  /* =========================
     Utilidades
     ========================= */
  .kbd {
    font-family: ui-monospace, Menlo, Consolas, monospace;
    background: rgba(148, 163, 184, .15);
    padding: .1rem .4rem;
    border-radius: 6px;
  }
  
  /* =========================
     Modo ediciÃ³n (compat)
     ========================= */
  /* Si estÃ¡s editando dentro de #tasksCard (legacy) */
  body.editing #tasksCard table { 
    display: none !important; 
  }
  body.editing #caseEditor { 
    display: block !important; 
  }
  
  /* Si estÃ¡s editando dentro de #tableCard (actual) */
  body.editing #tableCard table { 
    display: none !important; 
  }
  body.editing #caseEditor { 
    display: block !important; 
  }
  /* Paginador */
.paginator{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.75rem;
  margin-top:.5rem;
}
.paginator .right{ display:flex; align-items:center; gap:.5rem; }
#pageInfo{ min-width:60px; text-align:center; color:var(--muted); }
.paginator .btn{ padding:.45rem .8rem; }
/* Fuerza ocultar filas fuera de la pÃ¡gina activa, por sobre cualquier estilo previo */
.is-hidden-pager { display: none !important; }

#tableCard thead th {
  position: sticky;
  top: 0;
  z-index: 3;
  background: var(--panel);
  font-weight: 700;
  color: #0F172A;
}
.is-hidden-pager { display: none !important; }
/* Oculta el paginador cuando estÃ¡s editando un caso */
body.editing #tasksPaginator {
  display: none !important;
}

/* (Opcional) si prefieres ocultar cualquier paginador dentro de #tableCard */
body.editing #tableCard .paginator {
  display: none !important;
}
tr.row-selected { background: rgba(59,130,246,.08); }
.negocio-id {
  font-weight: 400;
}
.negocio-prioridad {
  color: var(--muted);
  font-size: .85rem;
  line-height: 1.3;
}
.mobile-case-stack {
  display: none;
}
.mobile-tags-stack {
  display: none;
}
.mobile-tag-item {
  display: block;
}
.assignee-initials {
  display: none;
}
.mobile-detail-actions {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
}
.mobile-status {
  display: none;
}

/* === RESPONSIVE PATCH (NO DESKTOP CHANGES) === */
.mobile-nav-toggle {
  display: none;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid rgba(148, 163, 184, .35);
  background: var(--panel);
  color: var(--text);
  cursor: pointer;
  padding: 0;
}
.mobile-nav-icon {
  position: relative;
  width: 18px;
  height: 2px;
  background: currentColor;
  border-radius: 2px;
}
.mobile-nav-icon::before,
.mobile-nav-icon::after {
  content: '';
  position: absolute;
  left: 0;
  width: 100%;
  height: 2px;
  background: currentColor;
  border-radius: 2px;
}
.mobile-nav-icon::before { top: -6px; }
.mobile-nav-icon::after { top: 6px; }

#sidebarActions {
  display: none;
}

#sidebarBrand {
  display: none;
}

#btnBulkActions {
  display: none;
  font-size: 1.25rem;
  line-height: 1;
  gap: .25rem;
}

#btnBulkActions::after {
  content: '';
  width: 0;
  height: 0;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 6px solid currentColor;
  transform: translateY(1px);
}

#btnDashboardFiltersToggle {
  display: none;
}

.bulk-actions-modal {
  width: min(360px, 100%);
}

.bulk-actions-modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .5rem;
}

.bulk-actions-list {
  display: flex;
  flex-direction: column;
  gap: .5rem;
  margin-top: .75rem;
}

.bulk-actions-list .btn {
  width: 100%;
  justify-content: center;
}

@media (max-width: 1024px) {
  body,
  #app {
    overflow-x: hidden;
  }

  header.app {
    flex-wrap: wrap;
    gap: clamp(.5rem, 2vw, 1rem);
  }

  .brand,
  .header-left,
  .app-header-actions,
  .editor-header-actions,
  .header-right {
    min-width: 0;
  }

  .header-left,
  .app-header-actions,
  .editor-header-actions,
  .header-right,
  .dashboard-actions-row,
  .dashboard-actions-bar,
  .dashboard-actions,
  .kpi-granularity-controls,
  .filters-card-header,
  .filters-quick-actions,
  .dashboard-range-wrapper {
    flex-wrap: wrap;
  }

  .app-header-actions,
  .editor-header-actions {
    width: 100%;
  }

  .app-header-actions > *,
  .editor-header-actions > * {
    flex: 1 1 180px;
    min-width: min(180px, 100%);
  }

  #q {
    flex: 1 1 240px;
    min-width: min(240px, 100%);
  }

  .layout {
    padding: clamp(.5rem, 2vw, 1rem);
    gap: clamp(.5rem, 2vw, 1rem);
  }

  .panel,
  .card,
  .table-scroll,
  .dashboard-goal-panel {
    max-width: 100%;
  }

  main.panel,
  #tableCard,
  #tableView {
    min-width: 0;
  }

  img,
  svg,
  video {
    max-width: 100%;
    height: auto;
  }

  .logo-corredora {
    width: clamp(140px, 22vw, 200px);
    height: auto;
    margin-right: 8px;
    transform: none;
  }

  .logo-konecta-cuadrado {
    width: 44px;
    height: 44px;
  }

  .header-user-info {
    min-width: 0;
  }

  .header-user-name,
  .header-user-role {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  #dashboardKpiCards {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .dash-card .stat-value {
    font-size: 2.4rem;
  }

  #dashboardChartsRow,
  #dashboardSummary .charts-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    grid-auto-rows: auto;
  }

  #dashboardFunnelCard {
    display: none;
  }

  .filter-groups-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .dash-card.chart-card {
    height: clamp(260px, 46vw, 320px);
    max-height: none;
    min-height: 260px;
    contain: none;
  }

  .dash-card.chart-card canvas {
    height: 100% !important;
    min-height: 0;
  }

  .filters-quick-actions {
    margin-top: clamp(12px, 3vw, 24px);
  }

  .dashboard-custom-range {
    flex-wrap: wrap;
  }

  .users-app-header {
    gap: clamp(.5rem, 2vw, 1rem);
  }

  header.app.users-app-header .brand {
    width: 100%;
    justify-content: center;
  }

  header.app.users-app-header .logo-corredora {
    margin-right: 0;
    transform: none;
  }

  .users-actions {
    width: 100%;
    flex-wrap: wrap;
  }

  .users-actions > * {
    flex: 1 1 200px;
    min-width: min(200px, 100%);
  }

  .wrap {
    padding: clamp(.75rem, 2vw, 1rem);
  }

  #btnExport,
  #importButton,
  #btnCSV,
  #btnBackup {
    display: none !important;
  }

  #btnDashboardToggleGoal {
    display: none !important;
  }

  #btnDashboardFiltersToggle {
    display: inline-flex;
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
    padding: 0;
    border-radius: 999px;
    justify-content: center;
    gap: 0;
    font-size: 0;
  }

  #btnDashboardFiltersToggle::before {
    content: "";
    display: inline-block;
    width: 18px;
    height: 18px;
    background-color: currentColor;
    -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M3 4h18l-7 8v6l-4 2v-8z'/%3E%3C/svg%3E") no-repeat center / contain;
    mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M3 4h18l-7 8v6l-4 2v-8z'/%3E%3C/svg%3E") no-repeat center / contain;
  }

  #dashboardFilters.dashboard-filters {
    display: none;
  }

  body.is-dashboard-filters-open #dashboardFilters.dashboard-filters {
    display: flex;
  }

  #countLabel {
    display: none;
  }

  #tasksPaginator label {
    display: none;
  }

  #btnBulkActions {
    display: inline-flex;
  }

  #bulkActionsInline #btnDeleteSelected,
  #bulkActionsInline #btnBulkStatus,
  #bulkActionsInline #btnBulkAssign {
    display: none;
  }

  #btnNew,
  #btnUsers,
  #btnClientes,
  #btnTheme,
  #btnLogout {
    flex: 0 0 auto;
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
    padding: 0;
    border-radius: 999px;
    justify-content: center;
    gap: 0;
    font-size: 0;
  }

  #btnNew::before,
  #btnUsers::before,
  #btnClientes::before,
  #btnTheme::before,
  #btnLogout::before {
    display: inline-block;
    font-size: 1.1rem;
    line-height: 1;
  }

  #btnNew::before { content: "+"; }
  #btnUsers::before { content: "ðŸ‘¤"; }
  #btnClientes::before { content: "ðŸ‘¥"; }
  #btnTheme::before { content: "ðŸŒ“"; }
  #btnLogout::before { content: "âŽ‹"; }
}

@media (max-width: 768px) {
  .mobile-nav-toggle {
    display: inline-flex;
  }

  header.app {
    padding: clamp(.75rem, 3vw, 1rem);
  }

  .brand,
  .header-left {
    width: 100%;
    flex: 1 0 100%;
  }

  .header-left {
    align-items: center;
    gap: .5rem;
  }

  #app > header.app .header-left {
    display: grid;
    grid-template-columns: minmax(44px, 1fr) auto minmax(44px, 1fr);
    align-items: center;
  }

  #app > header.app .mobile-nav-toggle {
    grid-column: 1;
    justify-self: start;
  }

  #app > header.app .logo-corredora {
    grid-column: 2;
    justify-self: center;
    margin: 0 auto;
    transform: none;
    display: block;
  }

  #tbl thead {
    display: none;
  }

  main.panel {
    background: transparent;
    box-shadow: none;
    border: none;
    padding: 0;
  }

  #tableCard {
    background: transparent;
    box-shadow: none;
    border: none;
    border-radius: 0;
    padding: 0;
  }

  #tableCard #tbl {
    width: 100%;
    min-width: 0;
    border-collapse: separate;
    border-spacing: 0 .75rem;
  }

  #tableCard #tbl tbody td {
    background: var(--panel);
    border-bottom: none;
    border-top: 1px solid rgba(148, 163, 184, .2);
    border-bottom: 1px solid rgba(148, 163, 184, .2);
  }

  #tableCard #tbl tbody td:first-child {
    border-left: 1px solid rgba(148, 163, 184, .2);
    border-top-left-radius: 16px;
    border-bottom-left-radius: 16px;
    vertical-align: top;
    padding-top: .85rem;
  }

  #tableCard #tbl tbody td:first-child .rowCheck {
    margin-top: .1rem;
    margin-left: -5px;
  }

  #tableCard #tbl tbody td:last-child {
    border-right: 1px solid rgba(148, 163, 184, .2);
    border-top-right-radius: 16px;
    border-bottom-right-radius: 16px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    justify-content: flex-start;
    gap: .35rem;
    flex-wrap: nowrap;
    padding-top: .85rem;
  }

  #tableCard #tbl tbody tr {
    box-shadow: 0 8px 20px rgba(2, 6, 23, .08);
  }

  #tableCard #tbl tbody tr.row-selected td {
    background: rgba(59, 130, 246, .08);
  }

  #tableCard #tbl tbody td:nth-child(7),
  #tableCard #tbl tbody td:nth-child(8),
  #tableCard #tbl tbody td:nth-child(11),
  #tableCard #tbl tbody td:nth-child(3),
  #tableCard #tbl tbody td:nth-child(4),
  #tableCard #tbl tbody td:nth-child(5),
  #tableCard #tbl tbody td:nth-child(6),
  #tableCard #tbl tbody td:nth-child(9),
  #tableCard #tbl tbody td:nth-child(10) {
    display: none;
  }

  #tableCard #tbl .negocio-id {
    display: none;
  }

  #tableCard #tbl tbody td:nth-child(2) .negocio-prioridad {
    display: none;
  }

  #tableCard #tbl .negocio-prioridad-label {
    display: none;
  }

  .mobile-case-stack {
    display: grid;
    gap: .2rem;
  }

  .mobile-case-line {
    line-height: 1.2;
  }

  .mobile-case-priority {
    font-weight: 700;
  }

  .mobile-tags-stack {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .15rem;
    margin-top: .35rem;
    margin-left: -17px;
  }

  .mobile-tag-item {
    font-size: .64rem;
    line-height: 1;
    margin-left: 6px;
  }

  .mobile-detail-actions {
    display: flex;
    align-items: center;
    gap: .4rem;
  }

  .mobile-status {
    display: block;
    font-size: .8rem;
    color: var(--muted);
  }

  #tableCard #tbl tbody td:last-child .btnEdit {
    width: 38px;
    height: 38px;
    min-width: 38px;
    min-height: 38px;
    padding: 0;
    font-size: .9rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
  }

  #tableCard #tbl tbody td:nth-child(6) {
    text-align: center;
  }

  .assignee-full {
    display: none;
  }

  .assignee-initials {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 34px;
    height: 34px;
    border-radius: 999px;
    background: rgba(59, 130, 246, .18);
    border: 1px solid rgba(59, 130, 246, .35);
    color: var(--primary-600);
    font-weight: 700;
    font-size: .75rem;
    letter-spacing: .02em;
    text-transform: uppercase;
  }

  .lus-client-status .lus-client-chip__label {
    display: none;
  }

  .case-log-card {
    max-height: min(70vh, calc(100vw * 16 / 9));
    display: flex;
    flex-direction: column;
  }

  .case-log-card #ce_comments {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
  }

  .case-carousel {
    display: flex;
    gap: .75rem;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    align-items: flex-start;
    padding-bottom: .5rem;
    margin-bottom: .75rem;
  }

  .case-carousel .case-cards-row {
    display: contents;
    margin: 0;
  }

  .case-carousel .card {
    flex: 0 0 min(88%, 420px);
    scroll-snap-align: start;
    height: var(--case-card-height, auto);
    overflow-y: auto;
    overflow-x: hidden;
    align-self: flex-start;
  }

  .header-divider {
    display: none;
  }

  .app-header-actions,
  .editor-header-actions {
    order: 3;
    width: 100%;
  }

  .app-header-actions > *,
  .editor-header-actions > * {
    flex: 1 1 100%;
    min-width: 0;
  }

  #q {
    min-width: 0;
    width: auto;
  }

  .editor-header-actions {
    flex-direction: row;
    gap: .5rem;
  }

  .editor-header-actions > * {
    flex: 1 1 0;
  }

  #btnEditorExit {
    background: #fff;
    color: #0f172a;
    border: 1px solid rgba(148, 163, 184, .45);
  }

  .header-right {
    width: 100%;
    justify-content: space-between;
  }

  .layout {
    grid-template-columns: 1fr;
    padding: clamp(.5rem, 2vw, .75rem);
  }

  .panel-left {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: min(88vw, 320px);
    transform: translateX(-100%);
    transition: transform .2s ease;
    z-index: 90;
    overflow-y: auto;
    padding-bottom: 5rem;
    border-radius: 0 16px 16px 0;
  }

  body.is-mobile-nav-open .panel-left {
    transform: translateX(0);
  }

  body.is-mobile-nav-open {
    overflow: hidden;
  }

  body.is-mobile-nav-open::before {
    content: '';
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, .55);
    z-index: 80;
  }

  .modal-blur {
    z-index: 120;
  }

  #sidebarBrand {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .75rem .75rem 0;
  }

  #sidebarBrand .header-user-info {
    min-width: 0;
  }

  #sidebarBrand .header-user-info > :not(.header-user-name) {
    display: none;
  }

  #sidebarBrand .header-user-name {
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  #sidebarBrand + .filters-card-header {
    margin-top: .5rem;
  }

  .app-header-actions #btnUsers,
  .app-header-actions #btnClientes,
  .app-header-actions #btnTheme,
  .app-header-actions #btnLogout {
    display: none;
  }

  #sidebarActions {
    display: grid;
    position: fixed;
    left: 0;
    bottom: 0;
    width: min(88vw, 320px);
    padding: .75rem;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: .5rem;
    background: var(--panel);
    border-top: 1px solid rgba(148, 163, 184, .25);
    border-radius: 0 16px 0 0;
    transform: translateX(-100%);
    transition: transform .2s ease;
    z-index: 91;
  }

  body.is-mobile-nav-open #sidebarActions {
    transform: translateX(0);
  }

  #sidebarActions .btn {
    justify-self: center;
  }

  .filters-card-header,
  .filters-quick-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .filters-mode-toggle {
    width: 100%;
    justify-content: space-between;
  }

  .filters-mode-btn {
    flex: 1 1 0;
    text-align: center;
  }

  .filter-groups-grid {
    grid-template-columns: 1fr;
  }

  #dashboardFilters,
  .dashboard-filters {
    flex-direction: column;
    align-items: stretch;
  }

  .dashboard-range-wrapper,
  .dashboard-custom-range {
    flex-direction: column;
    align-items: stretch;
  }

  .dashboard-custom-range input[type="date"] {
    width: 100%;
  }

  #dashboardFilters.dashboard-filters label,
  .dashboard-range-wrapper > label,
  .dashboard-custom-range {
    flex: 0 0 auto;
  }

  #dashboardKpiCards {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  #dashboardKpiCards .dash-section-title {
    font-size: clamp(.98rem, 3.5vw, 1.13rem);
    line-height: 1.1;
    white-space: nowrap;
  }

  #dashboardChartsRow,
  #dashboardSummary .charts-grid {
    grid-template-columns: 1fr;
    grid-auto-rows: minmax(260px, auto);
  }

  .case-cards-row {
    grid-template-columns: 1fr;
    gap: .75rem;
  }

  #caseEditor [style*="grid-template-columns"] {
    grid-template-columns: 1fr !important;
  }

  #taskForm {
    grid-template-columns: 1fr !important;
  }

  #exportRangeModal .form-row {
    grid-template-columns: 1fr !important;
  }

  #metaModal .grid-2,
  .modal .grid-2,
  .modal .grid-3 {
    grid-template-columns: 1fr !important;
  }

  .form-modal {
    padding: clamp(.75rem, 3vw, 1.25rem);
  }

  .form-modal .panel-right,
  .modal-blur__card,
  .modal .dialog {
    width: 100%;
    max-width: 100%;
  }

  #metaModal .modal-blur__card {
    width: 100%;
  }

  .paginator {
    flex-direction: column;
    align-items: stretch;
  }

  .paginator .right {
    width: 100%;
    justify-content: space-between;
  }

  .toolbar {
    flex-wrap: wrap;
  }

  .editing-inline-actions {
    flex-wrap: nowrap;
    gap: .5rem;
  }

  .editing-inline-actions .btn {
    flex: 1 1 0;
    min-width: 0;
  }

  .table-wrap,
  .table-scroll {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    max-width: 100%;
  }

  .table-wrap table,
  .table-scroll table {
    min-width: 980px;
  }

  .btn {
    min-height: 44px;
  }

  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="date"],
  input[type="number"],
  input[type="tel"],
  input[type="month"],
  input[type="search"],
  select,
  textarea {
    min-height: 44px;
  }

  .users-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .users-actions > * {
    width: 100%;
  }

  .login-card {
    padding: clamp(28px, 7vw, 48px) clamp(20px, 6vw, 40px);
  }

  .login-logo {
    max-width: 130px;
  }

  .login-actions {
    flex-direction: column;
  }
}

@media (max-width: 480px) {
  header.app {
    padding: clamp(.6rem, 4vw, .9rem);
  }

  .logo-corredora {
    width: clamp(120px, 52vw, 170px);
  }

  .logo-konecta-cuadrado {
    width: 40px;
    height: 40px;
  }

  .login-card {
    padding: 24px 18px;
  }

  .login-wrapper {
    padding: 1rem;
  }

  .app-header-actions {
    gap: .4rem;
  }

  .filters-quick-actions {
    margin-top: .75rem;
  }

  .kensa-footer {
    padding: 0 .75rem 1rem;
  }
}
